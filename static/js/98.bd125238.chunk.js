"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[98],{836:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(683);function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=r(184),i=["group","draggable","onDropReceived","onDropped","data"],s=function(e){var t=e.group,r=e.draggable,s=e.onDropReceived,c=e.onDropped,u=e.data,d=o(e,i);if(r&&(!u||!c))throw new Error("missing required props data or onDropped");return(0,a.jsx)("div",(0,n.Z)((0,n.Z)({},d),{},{draggable:r,onDragStart:function(e){e.stopPropagation(),e.dataTransfer.setData("draggable/".concat(t),JSON.stringify(u)),e.dataTransfer.effectAllowed="move"},onDragOver:function(e){e.stopPropagation();var r=e.dataTransfer.types.includes("draggable/".concat(t));e.dataTransfer.dropEffect=r?"move":"none",e.preventDefault()},onDrop:function(e){if(e.stopPropagation(),e.dataTransfer.types.includes("draggable/".concat(t))){var r=e.dataTransfer.getData("draggable/".concat(t)),n=JSON.parse(r);s(n)}e.preventDefault()},onDragEnd:function(e){e.stopPropagation(),"move"===e.dataTransfer.dropEffect&&c()}}))};s.defaultProps={draggable:!0};var c=s},699:function(e,t,r){var n=r(885),o=r(967);t.Z=function(e){var t=(0,o.Z)("board-".concat(e)),r=(0,n.Z)(t,2),a=r[0],i=r[1];if(null===a)throw new Error("cannot find board");return[a,i]}},967:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(885),o=r(791),a=r(285),i=r(671),s=r(144),c=r(274),u=r(359),d=(0,u.Z)("notifyCallback"),l=(0,u.Z)("active"),f=function(){function e(t){(0,i.Z)(this,e),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:!1}),(0,c.Z)(this,d)[d]=t}return(0,s.Z)(e,[{key:"subscribe",value:function(){(0,c.Z)(this,l)[l]=!0}},{key:"unsubscribe",value:function(){(0,c.Z)(this,l)[l]=!1}},{key:"notify",value:function(){(0,c.Z)(this,l)[l]&&(0,c.Z)(this,d)[d]()}}]),e}(),g=function(){var e=(0,o.useReducer)((function(e){return e+1}),0),t=(0,n.Z)(e,2);t[0];return t[1]},p=function(e,t){var r=(0,o.useContext)(a.Z),n=g(),i=(0,o.useCallback)((function(t){return r.set(e,t)}),[e,r]),s=(0,o.useCallback)((function(t){return r.merge(e,t)}),[e,r]);return(0,o.useEffect)((function(){var t=new f(n);return r.addObserver(e,t),t.subscribe(),function(){t.unsubscribe(),r.removeObserver(e,t)}}),[e,r,n]),[r.get(e,t),i,s]},v=r(782),b=function(e,t){null===v.X.getItem(e)&&null!==t&&v.X.setItem(e,JSON.stringify(t));var r=p(e,JSON.parse(v.X.getItem(e))),a=(0,n.Z)(r,2),i=a[0],s=a[1];return[i,(0,o.useCallback)((function(t){v.X.setItem(e,JSON.stringify(t)),s(t)}),[s,e])]}},98:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(885),o=r(791),a=r(689),i=r(699),s=r(836),c=r(683),u=r(982),d=r(782),l=function(e){var t=(0,i.Z)(e),r=(0,n.Z)(t,2),a=r[0],s=r[1],l=(0,o.useCallback)((function(e,t){if("string"!==typeof e)throw new Error("categoryId is required");var r=(0,u.Z)(a.categories);r.splice(t,0,{sortableId:d.e.randomUUID(),categoryId:e}),s((0,c.Z)((0,c.Z)({},a),{},{categories:r}))}),[a,s]),f=(0,o.useCallback)((function(e){if("string"!==typeof e)throw new Error("sortableId is required");var t=(0,u.Z)(a.categories),r=t.findIndex((function(t){return t.sortableId===e}));if(-1===r)throw new Error("cannot find category to remove");t.splice(r,1),s((0,c.Z)((0,c.Z)({},a),{},{categories:t}))}),[a,s]);return(0,o.useMemo)((function(){return{onDropReceived:l,onDropped:f}}),[l,f])},f=function(e){var t=(0,i.Z)(e),r=(0,n.Z)(t,2),a=r[0],s=r[1];return(0,o.useCallback)((function(e){var t=e.name;if("string"!==typeof t)throw new Error("name is required");var r=d.e.randomUUID(),n=[].concat((0,u.Z)(a.categories),[{sortableId:d.e.randomUUID(),categoryId:r}]);d.X.setItem("category-".concat(r),JSON.stringify({name:t,todos:[]})),s((0,c.Z)((0,c.Z)({},a),{},{categories:n}))}),[a,s])},g=r(967),p=function(e){var t=(0,g.Z)("category-".concat(e)),r=(0,n.Z)(t,2),o=r[0],a=r[1];if(null===o)throw new Error("cannot find category");return[o,a]},v=function(e){var t=p(e),r=(0,n.Z)(t,2),a=r[0],i=r[1],s=(0,o.useCallback)((function(e,t){if("string"!==typeof e)throw new Error("todoId is required");var r=(0,u.Z)(a.todos);r.splice(t,0,{sortableId:d.e.randomUUID(),todoId:e}),i((0,c.Z)((0,c.Z)({},a),{},{todos:r}))}),[a,i]),l=(0,o.useCallback)((function(e){if("string"!==typeof e)throw new Error("sortableId is required");var t=(0,u.Z)(a.todos),r=t.findIndex((function(t){return t.sortableId===e}));if(-1===r)throw new Error("cannot find todo to remove");t.splice(r,1),i((0,c.Z)((0,c.Z)({},a),{},{todos:t}))}),[a,i]);return(0,o.useMemo)((function(){return{onDropReceived:s,onDropped:l}}),[s,l])},b=function(e){var t=p(e),r=(0,n.Z)(t,2),a=r[0],i=r[1];return(0,o.useCallback)((function(e){var t=e.title;if("string"!==typeof t)throw new Error("title is required");var r=d.e.randomUUID(),n=[].concat((0,u.Z)(a.todos),[{sortableId:d.e.randomUUID(),todoId:r}]);d.X.setItem("todo-".concat(r),JSON.stringify({title:t,text:""})),i((0,c.Z)((0,c.Z)({},a),{},{todos:n}))}),[a,i])},m=r(285),y=function(e){var t=(0,o.useContext)(m.Z);return(0,o.useCallback)((function(){Object.keys(t.keys).filter((function(e){return e.includes("board")})).forEach((function(r){var n=t.get(r),o=n.categories.findIndex((function(t){return t.categoryId===e}));if(-1!==o){var a=(0,u.Z)(n.categories);a.splice(o,1);var i=(0,c.Z)((0,c.Z)({},n),{},{categories:a});d.X.setItem(r,JSON.stringify(i)),t.set(r,i)}}))}),[t,e])},Z=function(e){var t=(0,g.Z)("todo-".concat(e)),r=(0,n.Z)(t,2),o=r[0],a=r[1];if(null===o)throw new Error("cannot find todo");return[o,a]},h=function(e){var t=(0,o.useContext)(m.Z);return(0,o.useCallback)((function(){Object.keys(t.keys).filter((function(e){return e.includes("category")})).forEach((function(r){var n=t.get(r),o=n.todos.findIndex((function(t){return t.todoId===e}));if(-1!==o){var a=(0,u.Z)(n.todos);a.splice(o,1);var i=(0,c.Z)((0,c.Z)({},n),{},{todos:a});d.X.setItem(r,JSON.stringify(i)),t.set(r,i)}}))}),[t,e])},I="style_todo__Cd0It",w="style_delete__01aeG",D=r(184),x=function(e){var t=e.id,r=Z(t),o=(0,n.Z)(r,1)[0].title,a=h(t);return(0,D.jsxs)("div",{className:I,children:[o,(0,D.jsx)("button",{className:w,onClick:function(){window.confirm("Do you want to delete this todo?")&&a()},children:"X"})]})},j={category:"styles_category__sQGtR",todoLast:"styles_todoLast__LIsFn",heading:"styles_heading__lKpL0",delete:"styles_delete__ZQkhI"},_=function(e){var t=e.id,r=p(t),a=(0,n.Z)(r,1)[0],i=a.name,c=a.todos,u=b(t),d=v(t),l=d.onDropReceived,f=d.onDropped,g=y(t),m=(0,o.useCallback)((function(e){e.preventDefault(),u({title:e.target.title.value}),e.target.title.value=""}),[u]);return(0,D.jsxs)("div",{className:j.category,children:[(0,D.jsxs)("div",{className:j.heading,children:[(0,D.jsx)("h1",{children:i}),(0,D.jsx)("button",{className:j.delete,onClick:function(){window.confirm("Do you want to delete this category?")&&g()},children:"X"})]}),(0,D.jsxs)("div",{className:j.todos,children:[c.map((function(e,t){var r=e.sortableId,n=e.todoId;return(0,D.jsx)(s.Z,{className:j.todo,group:"todos",data:n,onDropReceived:function(e){return l(e,t)},onDropped:function(){return f(r)},children:(0,D.jsx)(x,{id:n})},r)})),(0,D.jsx)(s.Z,{className:j.todoLast,draggable:!1,group:"todos",onDropReceived:function(e){return l(e,c.length)}}),(0,D.jsxs)("form",{onSubmit:m,children:[(0,D.jsx)("input",{required:!0,minLength:"1",name:"title",placeholder:"title"}),(0,D.jsx)("input",{type:"submit",value:"Add Todo"})]})]})]})},k="styles_boardPage__7zTL0",O="styles_heading__UJRRG",C="styles_categories__zZ5mP",N="styles_category__gbHJU",E=function(){var e=(0,a.UO)().boardId,t=(0,i.Z)(e),r=(0,n.Z)(t,1)[0],c=r.name,u=r.categories,d=l(e),g=d.onDropReceived,p=d.onDropped,v=f(e),b=(0,o.useCallback)((function(e){e.preventDefault(),v({name:e.target.name.value}),e.target.name.value=""}),[v]);return(0,D.jsxs)("div",{className:k,children:[(0,D.jsx)("h1",{className:O,children:c}),(0,D.jsxs)("div",{className:C,children:[u.map((function(e,t){var r=e.sortableId,n=e.categoryId;return(0,D.jsx)(s.Z,{className:N,group:"catgories",data:n,onDropReceived:function(e){return g(e,t)},onDropped:function(){return p(r)},children:(0,D.jsx)(_,{id:n})},r)})),(0,D.jsxs)("form",{onSubmit:b,children:[(0,D.jsx)("input",{required:!0,minLength:"1",name:"name",placeholder:"name"}),(0,D.jsx)("input",{type:"submit",value:"Add Category"})]})]})]})}},782:function(e,t,r){r.d(t,{X:function(){return o},e:function(){return n}});var n=window.crypto,o=window.localStorage}}]);
//# sourceMappingURL=98.bd125238.chunk.js.map