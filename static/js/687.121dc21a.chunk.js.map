{"version":3,"file":"static/js/687.121dc21a.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/Sortable/index.js","hooks/useBoard/index.js","contexts/cache/Cache/CacheKeyObserver/index.js","hooks/useCache/useForceUpdate.js","hooks/useCache/index.js","hooks/useLocalStorage/index.js","pages/Boards/useBoards/index.js","pages/Boards/useCreateBoard/index.js","pages/Boards/useSortBoards/index.js","webpack://todo/./src/pages/Boards/BoardCard/styles.module.css?ec94","pages/Boards/BoardCard/index.js","webpack://todo/./src/pages/Boards/styles.module.css?6350","pages/Boards/index.js","utils/window.js"],"sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import PropTypes from \"prop-types\";\n\nconst Sortable = ({\n  group,\n  draggable,\n  onDropReceived,\n  onDropped,\n  data,\n  ...restProps\n}) => {\n  if (draggable) {\n    if (!data || !onDropped) {\n      throw new Error(\"missing required props data or onDropped\");\n    }\n  }\n\n  return (\n    <div\n      {...restProps}\n      draggable={draggable}\n      onDragStart={(e) => {\n        e.stopPropagation();\n        e.dataTransfer.setData(`draggable/${group}`, JSON.stringify(data));\n        e.dataTransfer.effectAllowed = \"move\";\n      }}\n      onDragOver={(e) => {\n        e.stopPropagation();\n        const isSortable = e.dataTransfer.types.includes(`draggable/${group}`);\n\n        if (isSortable) {\n          e.dataTransfer.dropEffect = \"move\";\n        } else {\n          e.dataTransfer.dropEffect = \"none\";\n        }\n\n        e.preventDefault();\n      }}\n      onDrop={(e) => {\n        e.stopPropagation();\n        const isSortable = e.dataTransfer.types.includes(`draggable/${group}`);\n\n        if (isSortable) {\n          const data = e.dataTransfer.getData(`draggable/${group}`);\n          const parsedData = JSON.parse(data);\n          onDropReceived(parsedData);\n        }\n\n        e.preventDefault();\n      }}\n      onDragEnd={(e) => {\n        e.stopPropagation();\n        if (e.dataTransfer.dropEffect === \"move\") onDropped();\n      }}\n    />\n  );\n};\n\nSortable.propTypes = {\n  group: PropTypes.string.isRequired,\n  onDropReceived: PropTypes.func.isRequired,\n  onDropped: PropTypes.func,\n  data: PropTypes.any,\n  draggable: PropTypes.bool,\n};\n\nSortable.defaultProps = {\n  draggable: true,\n};\n\nexport default Sortable;\n","import useLocalStorage from \"hooks/useLocalStorage\";\n\nconst useBoard = (id) => {\n  const [board, setBoard] = useLocalStorage(`board-${id}`);\n\n  if (board === null) throw new Error(\"cannot find board\");\n\n  return [board, setBoard];\n};\n\nexport default useBoard;\n","export default class CacheKeyObserver {\n  #notifyCallback;\n  #active = false;\n\n  constructor(notifyCallback) {\n    this.#notifyCallback = notifyCallback;\n  }\n\n  subscribe() {\n    this.#active = true;\n  }\n\n  unsubscribe() {\n    this.#active = false;\n  }\n\n  notify() {\n    if (this.#active) this.#notifyCallback();\n  }\n}\n","import { useReducer } from \"react\";\n\nconst useForceUpdate = () => {\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0);\n\n  return forceUpdate;\n};\n\nexport default useForceUpdate;\n","import { useCallback, useContext, useEffect } from \"react\";\nimport CacheContext from \"contexts/cache\";\nimport CacheKeyObserver from \"contexts/cache/Cache/CacheKeyObserver\";\nimport useForceUpdate from \"./useForceUpdate\";\n\nconst useCache = (key, defaultValue) => {\n  const cache = useContext(CacheContext);\n  const forceUpdate = useForceUpdate();\n  const setData = useCallback(\n    (newData) => cache.set(key, newData),\n    [key, cache]\n  );\n\n  const mergeData = useCallback(\n    (newData) => cache.merge(key, newData),\n    [key, cache]\n  );\n\n  useEffect(() => {\n    const observer = new CacheKeyObserver(forceUpdate);\n    cache.addObserver(key, observer);\n    observer.subscribe();\n\n    return () => {\n      observer.unsubscribe();\n      cache.removeObserver(key, observer);\n    };\n  }, [key, cache, forceUpdate]);\n\n  return [cache.get(key, defaultValue), setData, mergeData];\n};\n\nexport default useCache;\n","import { useCallback } from \"react\";\nimport useCache from \"hooks/useCache\";\nimport { localStorage } from \"utils/window\";\n\nconst useLocalStorage = (key, defaultValue) => {\n  const unparsedLocalStorageData = localStorage.getItem(key);\n  if (unparsedLocalStorageData === null && defaultValue !== null) {\n    localStorage.setItem(key, JSON.stringify(defaultValue));\n  }\n\n  // Shared cache key between all consumers of a local storage key, so that an update to one\n  // will refresh them all.\n  const [cacheData, setCacheData] = useCache(\n    key,\n    JSON.parse(localStorage.getItem(key))\n  );\n\n  const setData = useCallback(\n    (newData) => {\n      localStorage.setItem(key, JSON.stringify(newData));\n      setCacheData(newData);\n    },\n    [setCacheData, key]\n  );\n\n  return [cacheData, setData];\n};\n\nexport default useLocalStorage;\n","import useLocalStorage from \"hooks/useLocalStorage\";\n\nconst useBoards = () => {\n  return useLocalStorage(\"boards\", []);\n};\n\nexport default useBoards;\n","import { useCallback } from \"react\";\n\nimport { crypto, localStorage } from \"utils/window\";\n\nimport useBoards from \"../useBoards\";\n\nconst useCreateBoard = () => {\n  const [boards, setBoards] = useBoards();\n\n  return useCallback(\n    ({ name }) => {\n      if (typeof name !== \"string\") throw new Error(\"name is required\");\n\n      const newBoardId = crypto.randomUUID();\n      // sortableId is a unique identifer used by drag and drop operations\n      // boardId represents the actual board, the same boardId may temporarilly appear twice in\n      // boards array due to how drag and drops are handled.\n      const newBoards = [\n        ...boards,\n        { sortableId: crypto.randomUUID(), boardId: newBoardId },\n      ];\n\n      localStorage.setItem(\n        `board-${newBoardId}`,\n        JSON.stringify({\n          name,\n          categories: [],\n        })\n      );\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n};\n\nexport default useCreateBoard;\n","import { useMemo, useCallback } from \"react\";\n\nimport { crypto } from \"utils/window\";\n\nimport useBoards from \"../useBoards\";\n\nconst useSortBoards = () => {\n  const [boards, setBoards] = useBoards();\n\n  const onDropReceived = useCallback(\n    (boardId, index) => {\n      if (typeof boardId !== \"string\") throw new Error(\"boardId is required\");\n\n      const newBoards = [...boards];\n      newBoards.splice(index, 0, {\n        sortableId: crypto.randomUUID(),\n        boardId,\n      });\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n\n  const onDropped = useCallback(\n    (sortableId) => {\n      if (typeof sortableId !== \"string\")\n        throw new Error(\"sortableId is required\");\n\n      const newBoards = [...boards];\n      const removeIndex = newBoards.findIndex(\n        (board) => board.sortableId === sortableId\n      );\n\n      if (removeIndex === -1) throw new Error(\"cannot find board to remove\");\n\n      newBoards.splice(removeIndex, 1);\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n\n  return useMemo(\n    () => ({\n      onDropReceived,\n      onDropped,\n    }),\n    [onDropReceived, onDropped]\n  );\n};\n\nexport default useSortBoards;\n","// extracted by mini-css-extract-plugin\nexport default {\"board\":\"styles_board__myLKG\",\"boardLink\":\"styles_boardLink__Epvds\"};","import PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport useBoard from \"hooks/useBoard\";\n\nimport styles from \"./styles.module.css\";\n\nconst BoardCard = ({ id }) => {\n  const [{ name }] = useBoard(id);\n\n  return (\n    <Link className={styles.boardLink} to={`boards/${id}`}>\n      <p className={styles.sortableOne}>{name}</p>\n    </Link>\n  );\n};\n\nBoardCard.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default BoardCard;\n","// extracted by mini-css-extract-plugin\nexport default {\"boards\":\"styles_boards__pyK2L\",\"boardLast\":\"styles_boardLast__Pon-3\"};","import { useCallback } from \"react\";\nimport Sortable from \"components/Sortable\";\nimport useBoards from \"./useBoards\";\nimport useCreateBoard from \"./useCreateBoard\";\nimport useSortBoards from \"./useSortBoards\";\nimport BoardCard from \"./BoardCard\";\n\nimport styles from \"./styles.module.css\";\n\nconst Boards = () => {\n  const [boards] = useBoards();\n  const createBoard = useCreateBoard();\n  const { onDropReceived, onDropped } = useSortBoards();\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      createBoard({ name: e.target.name.value });\n      e.target.name.value = \"\";\n    },\n    [createBoard]\n  );\n\n  return (\n    <div className={styles.boards}>\n      {boards.map(({ sortableId, boardId }, index) => (\n        <Sortable\n          className={styles.board}\n          group=\"boards\"\n          key={sortableId}\n          data={boardId}\n          onDropReceived={(movedBoardId) => onDropReceived(movedBoardId, index)}\n          onDropped={() => onDropped(sortableId)}\n        >\n          <BoardCard id={boardId} />\n        </Sortable>\n      ))}\n      <Sortable\n        className={styles.boardLast}\n        draggable={false}\n        group=\"boards\"\n        onDropReceived={(movedBoardId) =>\n          onDropReceived(movedBoardId, boards.length)\n        }\n      ></Sortable>\n      <form onSubmit={handleSubmit}>\n        <input required minLength=\"1\" name=\"name\" placeholder=\"name\" />\n        <input type=\"submit\" value=\"Add Board\" />\n      </form>\n    </div>\n  );\n};\n\nexport default Boards;\n","export const crypto = window.crypto;\nexport const localStorage = window.localStorage;\n"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","Sortable","group","draggable","onDropReceived","onDropped","data","restProps","Error","onDragStart","e","stopPropagation","dataTransfer","setData","JSON","stringify","effectAllowed","onDragOver","isSortable","types","includes","dropEffect","preventDefault","onDrop","getData","parsedData","parse","onDragEnd","defaultProps","id","useLocalStorage","board","setBoard","CacheKeyObserver","notifyCallback","this","useReducer","x","defaultValue","cache","useContext","CacheContext","forceUpdate","useForceUpdate","useCallback","newData","set","mergeData","merge","useEffect","observer","addObserver","subscribe","unsubscribe","removeObserver","get","localStorage","useCache","cacheData","setCacheData","useBoards","boards","setBoards","name","newBoardId","crypto","newBoards","sortableId","boardId","categories","index","splice","removeIndex","findIndex","useMemo","useBoard","className","styles","to","createBoard","useCreateBoard","useSortBoards","handleSubmit","value","map","movedBoardId","onSubmit","required","minLength","placeholder","type","window"],"sourceRoot":""}