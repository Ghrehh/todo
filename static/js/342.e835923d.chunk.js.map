{"version":3,"file":"static/js/342.e835923d.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/Sortable/index.js","contexts/cache/Cache/CacheKeyObserver/index.js","hooks/useCache/useForceUpdate.js","hooks/useCache/index.js","utils/window.js","hooks/useLocalStorage/index.js","pages/Boards/useBoards/index.js","pages/Boards/useCreateBoard/index.js","pages/Boards/useSortBoards/index.js","hooks/useBoard/index.js","webpack://todo/./src/pages/Boards/BoardCard/styles.module.css?ec94","pages/Boards/BoardCard/index.js","webpack://todo/./src/pages/Boards/styles.module.css?6350","pages/Boards/index.js"],"sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import PropTypes from \"prop-types\";\n\nconst Sortable = ({\n  group,\n  draggable,\n  onDropReceived,\n  onDropped,\n  data,\n  ...restProps\n}) => {\n  if (draggable) {\n    if (!data || !onDropped) {\n      throw new Error(\"missing required props data or onDropped\");\n    }\n  }\n  return (\n    <div\n      {...restProps}\n      draggable={draggable}\n      onDragStart={(e) => {\n        e.dataTransfer.setData(`draggable/${group}`, JSON.stringify(data));\n        e.dataTransfer.effectAllowed = \"move\";\n      }}\n      onDragOver={(e) => {\n        const isSortable = e.dataTransfer.types.includes(`draggable/${group}`);\n        if (isSortable) e.dataTransfer.dropEffect = \"move\";\n\n        e.preventDefault();\n      }}\n      onDrop={(e) => {\n        const isSortable = e.dataTransfer.types.includes(`draggable/${group}`);\n\n        if (isSortable) {\n          const data = e.dataTransfer.getData(`draggable/${group}`);\n          console.log(data);\n          const parsedData = JSON.parse(data);\n          onDropReceived(parsedData);\n        }\n\n        e.preventDefault();\n      }}\n      onDragEnd={(e) => {\n        if (e.dataTransfer.dropEffect === \"move\") onDropped();\n      }}\n    />\n  );\n};\n\nSortable.propTypes = {\n  group: PropTypes.string.isRequired,\n  onDropReceived: PropTypes.func.isRequired,\n  onDropped: PropTypes.func,\n  data: PropTypes.any,\n  draggable: PropTypes.bool,\n};\n\nSortable.defaultProps = {\n  draggable: true,\n};\n\nexport default Sortable;\n","export default class CacheKeyObserver {\n  #notifyCallback;\n  #active = false;\n\n  constructor(notifyCallback) {\n    this.#notifyCallback = notifyCallback;\n  }\n\n  subscribe() {\n    this.#active = true;\n  }\n\n  unsubscribe() {\n    this.#active = false;\n  }\n\n  notify() {\n    if (this.#active) this.#notifyCallback();\n  }\n}\n","import { useReducer } from \"react\";\n\nconst useForceUpdate = () => {\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0);\n\n  return forceUpdate;\n};\n\nexport default useForceUpdate;\n","import { useCallback, useContext, useEffect } from \"react\";\nimport CacheContext from \"contexts/cache\";\nimport CacheKeyObserver from \"contexts/cache/Cache/CacheKeyObserver\";\nimport useForceUpdate from \"./useForceUpdate\";\n\nconst useCache = (key, defaultValue) => {\n  const cache = useContext(CacheContext);\n  const forceUpdate = useForceUpdate();\n  const setData = useCallback(\n    (newData) => cache.set(key, newData),\n    [key, cache]\n  );\n\n  const mergeData = useCallback(\n    (newData) => cache.merge(key, newData),\n    [key, cache]\n  );\n\n  useEffect(() => {\n    const observer = new CacheKeyObserver(forceUpdate);\n    cache.addObserver(key, observer);\n    observer.subscribe();\n\n    return () => {\n      observer.unsubscribe();\n      cache.removeObserver(key, observer);\n    };\n  }, [key, cache, forceUpdate]);\n\n  return [cache.get(key, defaultValue), setData, mergeData];\n};\n\nexport default useCache;\n","export const crypto = window.crypto;\nexport const localStorage = window.localStorage;\n","import { useCallback, useMemo } from \"react\";\nimport useCache from \"hooks/useCache\";\nimport { localStorage, crypto } from \"utils/window\";\n\nconst useLocalStorage = (key, defaultValue) => {\n  // Shared cache key between all consumers of a local storage key, so that an update to one\n  // will refresh them all.\n  const [_, setCacheData] = useCache(\n    `local-storage-updater-${key}`,\n    crypto.randomUUID()\n  );\n\n  const setData = useCallback(\n    (newData) => {\n      localStorage.setItem(key, JSON.stringify(newData));\n      setCacheData(crypto.randomUUID());\n    },\n    [setCacheData, key]\n  );\n\n  const data = useMemo(() => {\n    const value = localStorage.getItem(key);\n\n    if (value === null && defaultValue !== null) {\n      setData(defaultValue);\n      return defaultValue;\n    }\n\n    console.log(key, value);\n    return JSON.parse(value);\n  }, [defaultValue, key, setData]);\n\n  return [data, setData];\n};\n\nexport default useLocalStorage;\n","import useLocalStorage from \"hooks/useLocalStorage\";\n\nconst useBoards = () => {\n  return useLocalStorage(\"boards\", []);\n};\n\nexport default useBoards;\n","import { useCallback } from \"react\";\n\nimport { crypto, localStorage } from \"utils/window\";\n\nimport useBoards from \"../useBoards\";\n\nconst useCreateBoard = () => {\n  const [boards, setBoards] = useBoards();\n\n  return useCallback(\n    ({ name }) => {\n      if (typeof name !== \"string\") throw new Error(\"name is required\");\n\n      const newBoardId = crypto.randomUUID();\n      // sortableId is a unique identifer used by drag and drop operations\n      // boardId represents the actual board, the same boardId may temporarilly appear twice in\n      // boards array due to how drag and drops are handled.\n      const newBoards = [\n        ...boards,\n        { sortableId: crypto.randomUUID(), boardId: newBoardId },\n      ];\n\n      localStorage.setItem(\n        `board-${newBoardId}`,\n        JSON.stringify({\n          id: crypto.randomUUID(),\n          name,\n        })\n      );\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n};\n\nexport default useCreateBoard;\n","import { useMemo, useCallback } from \"react\";\n\nimport { crypto } from \"utils/window\";\n\nimport useBoards from \"../useBoards\";\n\nconst useSortBoards = () => {\n  const [boards, setBoards] = useBoards();\n\n  const onDropReceived = useCallback(\n    (boardId, index) => {\n      if (typeof boardId !== \"string\") throw new Error(\"boardId is required\");\n\n      const newBoards = [...boards];\n      newBoards.splice(index, 0, {\n        sortableId: crypto.randomUUID(),\n        boardId,\n      });\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n\n  const onDropped = useCallback(\n    (sortableId) => {\n      if (typeof sortableId !== \"string\")\n        throw new Error(\"sortableId is required\");\n\n      const newBoards = [...boards];\n      const removeIndex = newBoards.findIndex(\n        (board) => board.sortableId === sortableId\n      );\n\n      if (removeIndex === -1) throw new Error(\"cannot find board to remove\");\n\n      newBoards.splice(removeIndex, 1);\n\n      setBoards(newBoards);\n    },\n    [boards, setBoards]\n  );\n\n  return useMemo(\n    () => ({\n      onDropReceived,\n      onDropped,\n    }),\n    [onDropReceived, onDropped]\n  );\n};\n\nexport default useSortBoards;\n","import useLocalStorage from \"hooks/useLocalStorage\";\n\nconst useBoard = (id) => {\n  const [board, setBoard] = useLocalStorage(`board-${id}`);\n\n  if (board === null) throw new Error(\"cannot find board\");\n\n  return [board, setBoard];\n};\n\nexport default useBoard;\n","// extracted by mini-css-extract-plugin\nexport default {\"board\":\"styles_board__myLKG\",\"boardLink\":\"styles_boardLink__Epvds\"};","import PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport useBoard from \"hooks/useBoard\";\n\nimport styles from \"./styles.module.css\";\n\nconst BoardCard = ({ id }) => {\n  const [{ name }] = useBoard(id);\n\n  return (\n    <Link className={styles.boardLink} to={`boards/${id}`}>\n      <p className={styles.sortableOne}>{name}</p>\n    </Link>\n  );\n};\n\nBoardCard.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default BoardCard;\n","// extracted by mini-css-extract-plugin\nexport default {\"boards\":\"styles_boards__pyK2L\",\"boardLast\":\"styles_boardLast__Pon-3\"};","import { useCallback } from \"react\";\nimport Sortable from \"components/Sortable\";\nimport useBoards from \"./useBoards\";\nimport useCreateBoard from \"./useCreateBoard\";\nimport useSortBoards from \"./useSortBoards\";\nimport BoardCard from \"./BoardCard\";\n\nimport styles from \"./styles.module.css\";\n\nconst Boards = () => {\n  const [boards] = useBoards();\n  const createBoard = useCreateBoard();\n  const { onDropReceived, onDropped } = useSortBoards();\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      createBoard({ name: e.target.name.value });\n      e.target.name.value = \"\";\n    },\n    [createBoard]\n  );\n\n  return (\n    <div className={styles.boards}>\n      {boards.map(({ sortableId, boardId }, index) => (\n        <Sortable\n          className={styles.board}\n          group=\"note\"\n          key={sortableId}\n          data={boardId}\n          onDropReceived={(movedBoardId) => onDropReceived(movedBoardId, index)}\n          onDropped={() => onDropped(sortableId)}\n        >\n          <BoardCard id={boardId} />\n        </Sortable>\n      ))}\n      <Sortable\n        className={styles.boardLast}\n        draggable={false}\n        group=\"note\"\n        onDropReceived={(movedBoardId) =>\n          onDropReceived(movedBoardId, boards.length)\n        }\n      ></Sortable>\n      <form onSubmit={handleSubmit}>\n        <input required minLength=\"1\" name=\"name\" placeholder=\"name\" />\n        <input type=\"submit\" value=\"Add Board\" />\n      </form>\n    </div>\n  );\n};\n\nexport default Boards;\n"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","Sortable","group","draggable","onDropReceived","onDropped","data","restProps","Error","onDragStart","e","dataTransfer","setData","JSON","stringify","effectAllowed","onDragOver","types","includes","dropEffect","preventDefault","onDrop","getData","console","log","parsedData","parse","onDragEnd","defaultProps","CacheKeyObserver","notifyCallback","this","useReducer","x","defaultValue","cache","useContext","CacheContext","forceUpdate","useForceUpdate","useCallback","newData","set","mergeData","merge","useEffect","observer","addObserver","subscribe","unsubscribe","removeObserver","get","crypto","window","localStorage","useCache","setCacheData","setItem","useMemo","value","getItem","useLocalStorage","useBoards","boards","setBoards","name","newBoardId","newBoards","sortableId","boardId","id","index","splice","removeIndex","findIndex","board","setBoard","useBoard","className","styles","to","createBoard","useCreateBoard","useSortBoards","handleSubmit","map","movedBoardId","onSubmit","required","minLength","placeholder","type"],"sourceRoot":""}