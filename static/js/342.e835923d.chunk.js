"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[342],{342:function(r,e,n){n.r(e),n.d(e,{default:function(){return S}});var t=n(885),a=n(791),o=n(683);function i(r,e){if(null==r)return{};var n,t,a=function(r,e){if(null==r)return{};var n,t,a={},o=Object.keys(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||(a[n]=r[n]);return a}(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(r,n)&&(a[n]=r[n])}return a}var u=n(184),s=["group","draggable","onDropReceived","onDropped","data"],d=function(r){var e=r.group,n=r.draggable,t=r.onDropReceived,a=r.onDropped,d=r.data,c=i(r,s);if(n&&(!d||!a))throw new Error("missing required props data or onDropped");return(0,u.jsx)("div",(0,o.Z)((0,o.Z)({},c),{},{draggable:n,onDragStart:function(r){r.dataTransfer.setData("draggable/".concat(e),JSON.stringify(d)),r.dataTransfer.effectAllowed="move"},onDragOver:function(r){r.dataTransfer.types.includes("draggable/".concat(e))&&(r.dataTransfer.dropEffect="move"),r.preventDefault()},onDrop:function(r){if(r.dataTransfer.types.includes("draggable/".concat(e))){var n=r.dataTransfer.getData("draggable/".concat(e));console.log(n);var a=JSON.parse(n);t(a)}r.preventDefault()},onDragEnd:function(r){"move"===r.dataTransfer.dropEffect&&a()}}))};d.defaultProps={draggable:!0};var c=d,l=n(285),f=n(671),b=n(144),p=n(274),v=n(359),g=(0,v.Z)("notifyCallback"),m=(0,v.Z)("active"),y=function(){function r(e){(0,f.Z)(this,r),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:!1}),(0,p.Z)(this,g)[g]=e}return(0,b.Z)(r,[{key:"subscribe",value:function(){(0,p.Z)(this,m)[m]=!0}},{key:"unsubscribe",value:function(){(0,p.Z)(this,m)[m]=!1}},{key:"notify",value:function(){(0,p.Z)(this,m)[m]&&(0,p.Z)(this,g)[g]()}}]),r}(),h=function(){var r=(0,a.useReducer)((function(r){return r+1}),0),e=(0,t.Z)(r,2);e[0];return e[1]},D=function(r,e){var n=(0,a.useContext)(l.Z),t=h(),o=(0,a.useCallback)((function(e){return n.set(r,e)}),[r,n]),i=(0,a.useCallback)((function(e){return n.merge(r,e)}),[r,n]);return(0,a.useEffect)((function(){var e=new y(t);return n.addObserver(r,e),e.subscribe(),function(){e.unsubscribe(),n.removeObserver(r,e)}}),[r,n,t]),[n.get(r,e),o,i]},w=window.crypto,Z=window.localStorage,I=function(r,e){var n=D("local-storage-updater-".concat(r),w.randomUUID()),o=(0,t.Z)(n,2),i=(o[0],o[1]),u=(0,a.useCallback)((function(e){Z.setItem(r,JSON.stringify(e)),i(w.randomUUID())}),[i,r]);return[(0,a.useMemo)((function(){var n=Z.getItem(r);return null===n&&null!==e?(u(e),e):(console.log(r,n),JSON.parse(n))}),[e,r,u]),u]},k=function(){return I("boards",[])},O=n(982),j=function(){var r=k(),e=(0,t.Z)(r,2),n=e[0],o=e[1];return(0,a.useCallback)((function(r){var e=r.name;if("string"!==typeof e)throw new Error("name is required");var t=w.randomUUID(),a=[].concat((0,O.Z)(n),[{sortableId:w.randomUUID(),boardId:t}]);Z.setItem("board-".concat(t),JSON.stringify({id:w.randomUUID(),name:e})),o(a)}),[n,o])},x=function(){var r=k(),e=(0,t.Z)(r,2),n=e[0],o=e[1],i=(0,a.useCallback)((function(r,e){if("string"!==typeof r)throw new Error("boardId is required");var t=(0,O.Z)(n);t.splice(e,0,{sortableId:w.randomUUID(),boardId:r}),o(t)}),[n,o]),u=(0,a.useCallback)((function(r){if("string"!==typeof r)throw new Error("sortableId is required");var e=(0,O.Z)(n),t=e.findIndex((function(e){return e.sortableId===r}));if(-1===t)throw new Error("cannot find board to remove");e.splice(t,1),o(e)}),[n,o]);return(0,a.useMemo)((function(){return{onDropReceived:i,onDropped:u}}),[i,u])},U=n(87),E=function(r){var e=I("board-".concat(r)),n=(0,t.Z)(e,2),a=n[0],o=n[1];if(null===a)throw new Error("cannot find board");return[a,o]},_={board:"styles_board__myLKG",boardLink:"styles_boardLink__Epvds"},C=function(r){var e=r.id,n=E(e),a=(0,t.Z)(n,1)[0].name;return(0,u.jsx)(U.rU,{className:_.boardLink,to:"boards/".concat(e),children:(0,u.jsx)("p",{className:_.sortableOne,children:a})})},N={boards:"styles_boards__pyK2L",boardLast:"styles_boardLast__Pon-3"},S=function(){var r=k(),e=(0,t.Z)(r,1)[0],n=j(),o=x(),i=o.onDropReceived,s=o.onDropped,d=(0,a.useCallback)((function(r){r.preventDefault(),n({name:r.target.name.value}),r.target.name.value=""}),[n]);return(0,u.jsxs)("div",{className:N.boards,children:[e.map((function(r,e){var n=r.sortableId,t=r.boardId;return(0,u.jsx)(c,{className:N.board,group:"note",data:t,onDropReceived:function(r){return i(r,e)},onDropped:function(){return s(n)},children:(0,u.jsx)(C,{id:t})},n)})),(0,u.jsx)(c,{className:N.boardLast,draggable:!1,group:"note",onDropReceived:function(r){return i(r,e.length)}}),(0,u.jsxs)("form",{onSubmit:d,children:[(0,u.jsx)("input",{required:!0,minLength:"1",name:"name",placeholder:"name"}),(0,u.jsx)("input",{type:"submit",value:"Add Board"})]})]})}}}]);
//# sourceMappingURL=342.e835923d.chunk.js.map