"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[812],{836:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(683);function o(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var a=t(184),i=["group","draggable","onDropReceived","onDropped","data"],c=function(e){var r=e.group,t=e.draggable,c=e.onDropReceived,s=e.onDropped,u=e.data,d=o(e,i);if(t&&(!u||!s))throw new Error("missing required props data or onDropped");return(0,a.jsx)("div",(0,n.Z)((0,n.Z)({},d),{},{draggable:t,onDragStart:function(e){e.stopPropagation(),e.dataTransfer.setData("draggable/".concat(r),JSON.stringify(u)),e.dataTransfer.effectAllowed="move"},onDragOver:function(e){e.stopPropagation();var t=e.dataTransfer.types.includes("draggable/".concat(r));e.dataTransfer.dropEffect=t?"move":"none",e.preventDefault()},onDrop:function(e){if(e.stopPropagation(),e.dataTransfer.types.includes("draggable/".concat(r))){var t=e.dataTransfer.getData("draggable/".concat(r)),n=JSON.parse(t);c(n)}e.preventDefault()},onDragEnd:function(e){e.stopPropagation(),"move"===e.dataTransfer.dropEffect&&s()}}))};c.defaultProps={draggable:!0};var s=c},699:function(e,r,t){var n=t(885),o=t(967);r.Z=function(e){var r=(0,o.Z)("board-".concat(e)),t=(0,n.Z)(r,2),a=t[0],i=t[1];if(null===a)throw new Error("cannot find board");return[a,i]}},967:function(e,r,t){t.d(r,{Z:function(){return b}});var n=t(885),o=t(791),a=t(285),i=t(671),c=t(144),s=t(274),u=t(359),d=(0,u.Z)("notifyCallback"),l=(0,u.Z)("active"),f=function(){function e(r){(0,i.Z)(this,e),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:!1}),(0,s.Z)(this,d)[d]=r}return(0,c.Z)(e,[{key:"subscribe",value:function(){(0,s.Z)(this,l)[l]=!0}},{key:"unsubscribe",value:function(){(0,s.Z)(this,l)[l]=!1}},{key:"notify",value:function(){(0,s.Z)(this,l)[l]&&(0,s.Z)(this,d)[d]()}}]),e}(),p=function(){var e=(0,o.useReducer)((function(e){return e+1}),0),r=(0,n.Z)(e,2);r[0];return r[1]},g=function(e,r){var t=(0,o.useContext)(a.Z),n=p(),i=(0,o.useCallback)((function(r){return t.set(e,r)}),[e,t]),c=(0,o.useCallback)((function(r){return t.merge(e,r)}),[e,t]);return(0,o.useEffect)((function(){var r=new f(n);return t.addObserver(e,r),r.subscribe(),function(){r.unsubscribe(),t.removeObserver(e,r)}}),[e,t,n]),[t.get(e,r),i,c]},v=t(782),b=function(e,r){null===v.X.getItem(e)&&null!==r&&v.X.setItem(e,JSON.stringify(r));var t=g("local-storage-updater-".concat(e),JSON.parse(v.X.getItem(e))),a=(0,n.Z)(t,2),i=a[0],c=a[1];return[i,(0,o.useCallback)((function(r){v.X.setItem(e,JSON.stringify(r)),c(r)}),[c,e])]}},812:function(e,r,t){t.r(r),t.d(r,{default:function(){return k}});var n=t(885),o=t(791),a=t(689),i=t(699),c=t(836),s=t(683),u=t(982),d=t(782),l=function(e){var r=(0,i.Z)(e),t=(0,n.Z)(r,2),a=t[0],c=t[1],l=(0,o.useCallback)((function(e,r){if("string"!==typeof e)throw new Error("categoryId is required");var t=(0,u.Z)(a.categories);t.splice(r,0,{sortableId:d.e.randomUUID(),categoryId:e}),c((0,s.Z)((0,s.Z)({},a),{},{categories:t}))}),[a,c]),f=(0,o.useCallback)((function(e){if("string"!==typeof e)throw new Error("sortableId is required");var r=(0,u.Z)(a.categories),t=r.findIndex((function(r){return r.sortableId===e}));if(-1===t)throw new Error("cannot find category to remove");r.splice(t,1),c((0,s.Z)((0,s.Z)({},a),{},{categories:r}))}),[a,c]);return(0,o.useMemo)((function(){return{onDropReceived:l,onDropped:f}}),[l,f])},f=function(e){var r=(0,i.Z)(e),t=(0,n.Z)(r,2),a=t[0],c=t[1];return(0,o.useCallback)((function(e){var r=e.name;if("string"!==typeof r)throw new Error("name is required");var t=d.e.randomUUID(),n=[].concat((0,u.Z)(a.categories),[{sortableId:d.e.randomUUID(),categoryId:t}]);d.X.setItem("category-".concat(t),JSON.stringify({name:r,todos:[]})),c((0,s.Z)((0,s.Z)({},a),{},{categories:n}))}),[a,c])},p=t(967),g=function(e){var r=(0,p.Z)("category-".concat(e)),t=(0,n.Z)(r,2),o=t[0],a=t[1];if(null===o)throw new Error("cannot find category");return[o,a]},v=function(e){var r=g(e),t=(0,n.Z)(r,2),a=t[0],i=t[1],c=(0,o.useCallback)((function(e,r){if("string"!==typeof e)throw new Error("todoId is required");var t=(0,u.Z)(a.todos);t.splice(r,0,{sortableId:d.e.randomUUID(),todoId:e}),i((0,s.Z)((0,s.Z)({},a),{},{todos:t}))}),[a,i]),l=(0,o.useCallback)((function(e){if("string"!==typeof e)throw new Error("sortableId is required");var r=(0,u.Z)(a.todos),t=r.findIndex((function(r){return r.sortableId===e}));if(-1===t)throw new Error("cannot find todo to remove");r.splice(t,1),i((0,s.Z)((0,s.Z)({},a),{},{todos:r}))}),[a,i]);return(0,o.useMemo)((function(){return{onDropReceived:c,onDropped:l}}),[c,l])},b=function(e){var r=g(e),t=(0,n.Z)(r,2),a=t[0],i=t[1];return(0,o.useCallback)((function(e){var r=e.title;if("string"!==typeof r)throw new Error("title is required");var t=d.e.randomUUID(),n=[].concat((0,u.Z)(a.todos),[{sortableId:d.e.randomUUID(),todoId:t}]);d.X.setItem("todo-".concat(t),JSON.stringify({title:r,text:""})),i((0,s.Z)((0,s.Z)({},a),{},{todos:n}))}),[a,i])},m=function(e){var r=(0,p.Z)("todo-".concat(e)),t=(0,n.Z)(r,2),o=t[0],a=t[1];if(null===o)throw new Error("cannot find todo");return[o,a]},Z="style_todo__Cd0It",y=t(184),h=function(e){var r=e.id,t=m(r),o=(0,n.Z)(t,1)[0].title;return(0,y.jsx)("div",{className:Z,children:o})},w={category:"styles_category__sQGtR"},I=function(e){var r=e.id,t=g(r),a=(0,n.Z)(t,1)[0],i=a.name,s=a.todos,u=b(r),d=v(r),l=d.onDropReceived,f=d.onDropped,p=(0,o.useCallback)((function(e){e.preventDefault(),u({title:e.target.title.value}),e.target.title.value=""}),[u]);return(0,y.jsxs)("div",{className:w.category,children:[(0,y.jsx)("h1",{children:i}),(0,y.jsxs)("div",{className:w.todos,children:[s.map((function(e,r){var t=e.sortableId,n=e.todoId;return(0,y.jsx)(c.Z,{className:w.todo,group:"todos",data:n,onDropReceived:function(e){return l(e,r)},onDropped:function(){return f(t)},children:(0,y.jsx)(h,{id:n})},t)})),(0,y.jsxs)("form",{onSubmit:p,children:[(0,y.jsx)("input",{required:!0,minLength:"1",name:"title",placeholder:"title"}),(0,y.jsx)("input",{type:"submit",value:"Add Todo"})]})]})]})},D="styles_boardPage__7zTL0",j="styles_heading__UJRRG",x="styles_categories__zZ5mP",O="styles_category__gbHJU",k=function(){var e=(0,a.UO)().boardId,r=(0,i.Z)(e),t=(0,n.Z)(r,1)[0],s=t.name,u=t.categories,d=l(e),p=d.onDropReceived,g=d.onDropped,v=f(e),b=(0,o.useCallback)((function(e){e.preventDefault(),v({name:e.target.name.value}),e.target.name.value=""}),[v]);return(0,y.jsxs)("div",{className:D,children:[(0,y.jsx)("h1",{className:j,children:s}),(0,y.jsxs)("div",{className:x,children:[u.map((function(e,r){var t=e.sortableId,n=e.categoryId;return(0,y.jsx)(c.Z,{className:O,group:"catgories",data:n,onDropReceived:function(e){return p(e,r)},onDropped:function(){return g(t)},children:(0,y.jsx)(I,{id:n})},t)})),(0,y.jsxs)("form",{onSubmit:b,children:[(0,y.jsx)("input",{required:!0,minLength:"1",name:"name",placeholder:"name"}),(0,y.jsx)("input",{type:"submit",value:"Add Category"})]})]})]})}},782:function(e,r,t){t.d(r,{X:function(){return o},e:function(){return n}});var n=window.crypto,o=window.localStorage}}]);
//# sourceMappingURL=812.1ddddadf.chunk.js.map